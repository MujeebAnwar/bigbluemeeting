!function(t){t(".btnDeleteConfirm").on("click",function(){id=t(this).data("item"),function(a){t(".task-input").val(a)}(id)}),t(".btnDelete").on("click",function(a){var e=t("input[name=_token]").val(),l=t("input[name=_method]").val(),i=t(".task-input").val();url=action.replace(":id",i),t.ajax({url:url,type:"DELETE",dataType:"JSON",data:{id:i,_method:l,_token:e},success:function(t){window.location=currentUrl}})}),t("#addPar").on("click",function(){let a=[];t("#ul .tag span").each(function(e){a.push(t(this).text())}),t.ajax({type:"POST",url:postUrl,datatype:"json",data:{emails:a,room:t("#room").val(),_token:csrf},success:function(a){if(a.result.error){let e='<button type="button" class="close"  aria-label="Close"> <span aria-hidden="true">&times; </span></button>';t(".errorClass").empty().append(e+a.result.error),t(".errorClass").show()}a.result.success&&(url=url.replace(":slug",slug),window.location=url)}})}),t("#myModal").on("click",".close",function(){t(".errorClass").hide()}),t.fn.tags=function(a){this.selector;function e(a){var e=[];a.closest(".tags-wrapper").find("li.tag span").each(function(){e.push(t(this).text())});e=e.join(","),a.val(e)}return this.each(function(){var l=t(this),i=t("<div class='tags-wrapper'><ul id='ul'></ul></div>");tags=l.val(),tagsArray=tags.split(","),$ul=i.find("ul"),a||(a={}),a.maxSize=50,tagsArray.forEach(function(t){t&&$ul.append("<li class='tag' name='email[]'><span>"+t+"</span><a href='#'>x</a></li>")}),a.classList&&i.addClass(a.classList),$ul.append("<li class='tags-input'><input type='text' class='tags-secret form-control text-center border' placeholder='Enter Email'/></li>"),l.after(i),i.append(l);var n=$ul.find("input"),s=parseInt(n.css("font-size"))-4;i.on("click","li.tag a",function(a){a.preventDefault(),t(this).closest("li").remove(),l.trigger("tagRemove",t(this).closest("li").find("span").text()),e(l)}),i.on("keydown","li input",function(t){if(8==t.keyCode&&!n.val()){var a=$ul.find("li.tag:last").remove();e(l),l.trigger("tagRemove",a.find("span").text())}9==t.keyCode&&t.preventDefault()}),i.on("keyup","li input",function(t){t.preventDefault(),$ul=i.find("ul");var r=n.next(),o=r.hasClass("autofill-bg"),u=$ul.find("li.tags-input");if(n.width(n.val().length*s),o){r.width(r.val().length*s),n.width(r.val().length*s),r.width()<a.maxSize&&r.width(a.maxSize);var c=r.data().data}if(n.width()<a.maxSize&&n.width(a.maxSize),~[9,188,13].indexOf(t.keyCode)){var d=n.val().replace(",",""),p=!0;a.requireData&&o&&(~c.indexOf(d)||(p=!1,n.val(""))),a.unique&&~l.val().split(",").indexOf(d)&&(p=!1,n.val(""),r.val("")),a.maxTags&&l.val().split(",").length==a.maxTags&&(p=!1,n.val(""),r.val("")),d&&p&&(u.before("<li class='tag'><span>"+d+"</span><a href='#'>x</a></li>"),n.val(""),o&&r.val(""),e(l),l.trigger("tagAdd",d))}})})},t("#testInput").tags({unique:!0,maxTags:100})}(jQuery);